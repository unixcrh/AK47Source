<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>First Chart</title>
    <script src="../lib/go-debug.js"></script>
    <script src="wfParser.js"></script>
</head>
<body>
    <div id="myDiagramDiv"
         style="width:500px; height:500px; background-color: #DAE4E4;"></div>
    <script>
        var $ = go.GraphObject.make;
        var diagram = $(go.Diagram, "myDiagramDiv", {
            initialContentAlignment: go.Spot.Center, // center Diagram contents
            "undoManager.isEnabled": true, // enable Ctrl-Z to undo and Ctrl-Y to redo
            layout: $(go.LayeredDigraphLayout, { direction: 90 })
        });

        diagram.nodeTemplate =
          $(go.Node, "Auto",
            $(go.Shape, "RoundedRectangle",
              new go.Binding("fill", "color"),
              new go.Binding("stroke", "elapsed", wf.nodeElapsedParser)
            ),
            $(go.TextBlock,
                { margin: 3 },
                new go.Binding("text", "key"))
          );

        diagram.linkTemplate =
        $(go.Link,
          {
              routing: go.Link.Orthogonal,
              corner: 5,
              curve: go.Link.JumpOver
          },
          $(go.Shape,
            { strokeWidth: 1.5 },
            new go.Binding("stroke", "elapsed", wf.nodeElapsedParser),
            new go.Binding("strokeDashArray", "isReturn", wf.returnLinkParser)),
          $(go.Shape, { toArrow: "Standard", stroke: null, }, new go.Binding("fill", "elapsed", wf.nodeElapsedParser))
        );

        diagram.model = new go.GraphLinksModel(
        [
          { key: "Alpha", color: "lightblue", elapsed: true },
          { key: "Beta", color: "orange", elapsed: true },
          { key: "Gamma", color: "lightgreen", elapsed: false },
          { key: "Delta", color: "pink", elapsed: false }
        ],
        [
          { from: "Alpha", to: "Beta", elapsed: true },
          { from: "Alpha", to: "Gamma", elapsed: false },
          { from: "Beta", to: "Beta", elapsed: false, isReturn: true },
          { from: "Gamma", to: "Delta", elapsed: false },
          { from: "Delta", to: "Alpha", elapsed: false, isReturn: true }
        ]);
    </script>
</body>
</html>
